(()=>{"use strict";function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function t(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,n(e,t,"get"))}function n(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var r=new WeakMap,o=function(){function o(e,i,a){var u,c,s=this,l=e.data,f=e.handleCardClick,p=e.handleBinClick,h=e.handleLikeClick;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),function(e,t,n){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,n)}(this,r,{writable:!0,value:void 0}),this._text=l.name,this._image=l.link,this._id=l.id,this._likes=l.likes,this._ownerID=l.ownerID,this._cardSelector=i,this._handleCardClick=f,c=a,function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(u=this,n(u,r,"set"),c),this._handleBinClick=p,this._handleLikeClick=h,this._likesUser=this._likes.some((function(e){return e._id===t(s,r)})),this._likeCounter=l.likeCounter}var i,a;return i=o,(a=[{key:"_getTemplate",value:function(){return document.querySelector(this._cardSelector).content.querySelector(".photo").cloneNode(!0)}},{key:"getId",value:function(){return this._id}},{key:"isLiked",value:function(){return this._likesUser}},{key:"generateCard",value:function(){return this._element=this._getTemplate(),this._photoImage=this._element.querySelector(".photo__image"),this._photoImage.src=this._image,this._photoImage.alt=this._text,this._element.querySelector(".photo__text").textContent=this._text,this._binElement=this._element.querySelector(".photo__bin"),this._ownerID===t(this,r)&&this._binElement.classList.add("photo__bin_active"),this._elementLikeButton=this._element.querySelector(".photo__vector"),this._elementLikeCounter=this._element.querySelector(".photo__numlike"),this._elementLikeCounter.textContent=this._likeCounter,this._setEventListeners(),this._element}},{key:"toggleLikesState",value:function(e){this._elementLikeCounter.textContent=e.likes.length,this._likesUser=!this._likesUser,this.isLiked()?this._elementLikeButton.classList.add("photo__vector_active"):this._elementLikeButton.classList.remove("photo__vector_active")}},{key:"handleDeleteBinClick",value:function(){this._element.remove(),this._element=null}},{key:"_setEventListeners",value:function(){var e=this;this._elementLikeButton.addEventListener("click",(function(t){e._handleLikeClick(t)})),this._element.querySelector(".photo__bin").addEventListener("click",(function(){e._handleBinClick()})),this._photoImage.addEventListener("click",(function(){e._handleCardClick(e._text,e._image)}))}}])&&e(i.prototype,a),Object.defineProperty(i,"prototype",{writable:!1}),o}();function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var a=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._formSelector=t.formSelector,this._inputSelector=t.inputSelector,this._submitButtonSelector=t.submitButtonSelector,this._inactiveButtonClass=t.inactiveButtonClass,this._inputErrorClass=t.inputErrorClass,this._errorClass=t.errorClass,this._formList=n,this._buttonElement=this._formList.querySelector(this._submitButtonSelector)}var t,n;return t=e,(n=[{key:"_showInputError",value:function(e){var t=this._formList.querySelector("#".concat(e.id,"-error"));e.classList.add(this._errorClass),t.textContent=e.validationMessage,t.classList.add(this._inputErrorClass)}},{key:"_hideInputError",value:function(e){var t=this._formList.querySelector("#".concat(e.id,"-error"));e.classList.remove(this._errorClass),t.classList.remove(this._inputErrorClass),t.textContent=""}},{key:"_hasInvalidInput",value:function(){return this._inputList.some((function(e){return!e.validity.valid}))}},{key:"disableSubmitButton",value:function(){this._buttonElement.classList.add(this._inactiveButtonClass),this._buttonElement.disabled=!0}},{key:"_enableSubmitButton",value:function(){this._buttonElement.classList.remove(this._inactiveButtonClass),this._buttonElement.disabled=!1}},{key:"_toggleButtonState",value:function(){this._hasInvalidInput()?this.disableSubmitButton():this._enableSubmitButton()}},{key:"_checkInputValidity",value:function(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}},{key:"enableValidation",value:function(){var e=this;this._inputList=Array.from(this._formList.querySelectorAll(this._inputSelector)),this._toggleButtonState(),this._inputList.forEach((function(t){t.addEventListener("input",(function(){e._checkInputValidity(t),e._toggleButtonState()}))}))}}])&&i(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var c=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._renderer=t,this._container=document.querySelector(n)}var t,n;return t=e,(n=[{key:"addItem",value:function(e){this._container.prepend(e)}},{key:"renderItems",value:function(e){var t=this;e.forEach((function(e){t._renderer(e)}))}}])&&u(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var l=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(this,"_handleEscClose",(function(e){"Escape"===e.key&&n.close()})),this._popup=document.querySelector(t)}var t,n;return t=e,(n=[{key:"open",value:function(){document.addEventListener("keydown",this._handleEscClose),this._popup.classList.add("popup_active")}},{key:"close",value:function(){document.removeEventListener("keydown",this._handleEscClose),this._popup.classList.remove("popup_active")}},{key:"setEventListeners",value:function(){var e=this;this._popup.addEventListener("mousedown",(function(t){(t.target===e._popup||t.target.classList.contains("popup__close"))&&e.close()}))}}])&&s(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(){return h="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=d(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},h.apply(this,arguments)}function d(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_(e)););return e}function y(e,t){return y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},y(e,t)}function m(e,t){if(t&&("object"===f(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function _(e){return _=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},_(e)}var v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&y(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=_(r);if(o){var n=_(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return m(this,e)});function a(e){var t,n=e.popupSelector,r=e.imagePhoto,o=e.imageText;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,n))._imagePhoto=document.querySelector(r),t._imageText=document.querySelector(o),t}return t=a,(n=[{key:"open",value:function(e,t){this._imagePhoto.src=t,this._imagePhoto.alt=e,this._imageText.textContent=e,h(_(a.prototype),"open",this).call(this)}}])&&p(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(l);function b(e){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},b(e)}function k(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function g(){return g="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=w(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},g.apply(this,arguments)}function w(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=E(e)););return e}function S(e,t){return S=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},S(e,t)}function C(e,t){if(t&&("object"===b(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function E(e){return E=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},E(e)}var j=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&S(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=E(r);if(o){var n=E(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return C(this,e)});function a(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(n=i.call(this,e))._popupFormCard=n._popup.querySelector(".form"),n._handleFormSubmit=t,n._inputList=Array.from(n._popupFormCard.querySelectorAll(".form__item")),n}return t=a,(n=[{key:"_getInputValues",value:function(){var e={};return this._inputList.forEach((function(t){e[t.name]=t.value})),e}},{key:"setEventListeners",value:function(){var e=this;g(E(a.prototype),"setEventListeners",this).call(this),this._popupFormCard.addEventListener("submit",(function(t){t.preventDefault(),e._handleFormSubmit(e._getInputValues())}))}},{key:"close",value:function(){g(E(a.prototype),"close",this).call(this),this._popupFormCard.reset()}}])&&k(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(l);function O(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var L=function(){function e(t){var n=t.username,r=t.job,o=t.avatar;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._username=document.querySelector(n),this._job=document.querySelector(r),this._avatar=document.querySelector(o)}var t,n;return t=e,(n=[{key:"getUserInfo",value:function(){return{username:this._username.textContent,job:this._job.textContent}}},{key:"setUserInfo",value:function(e){var t=e.username,n=e.job,r=e.avatar;this._job.textContent=n,this._username.textContent=t,this._avatar.src=r}},{key:"getUserId",value:function(){return this._userID}},{key:"setUserId",value:function(e){this._userID=e}}])&&O(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function P(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var I=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._baseUrl=t.baseUrl,this._headers=t.headers}var t,n;return t=e,(n=[{key:"_handlePromiseErr",value:function(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))}},{key:"getUserInfoFromApi",value:function(){var e=this;return fetch(this._baseUrl+"/users/me",{method:"GET",headers:this._headers}).then((function(t){return e._handlePromiseErr(t)}))}},{key:"getInitialCards",value:function(){var e=this;return fetch(this._baseUrl+"/cards",{method:"GET",headers:this._headers}).then((function(t){return e._handlePromiseErr(t)}))}},{key:"addUserInfo",value:function(e){var t=this;return fetch(this._baseUrl+"/users/me",{method:"PATCH",headers:this._headers,body:JSON.stringify(e)}).then((function(e){return t._handlePromiseErr(e)}))}},{key:"addNewCard",value:function(e){var t=this;return fetch(this._baseUrl+"/cards",{method:"POST",headers:this._headers,body:JSON.stringify(e)}).then((function(e){return t._handlePromiseErr(e)}))}},{key:"addUserAvatar",value:function(e){var t=this;return fetch(this._baseUrl+"/users/me/avatar",{method:"PATCH",headers:this._headers,body:JSON.stringify(e)}).then((function(e){return t._handlePromiseErr(e)}))}},{key:"deleteNewCard",value:function(e){var t=this;return fetch(this._baseUrl+"/cards/".concat(e),{method:"DELETE",headers:this._headers}).then((function(e){return t._handlePromiseErr(e)}))}},{key:"putLikeCard",value:function(e){var t=this;return fetch(this._baseUrl+"/cards/".concat(e,"/likes"),{method:"PUT",headers:this._headers}).then((function(e){return t._handlePromiseErr(e)}))}},{key:"deleteLike",value:function(e){var t=this;return fetch(this._baseUrl+"/cards/".concat(e,"/likes"),{method:"DELETE",headers:this._headers}).then((function(e){return t._handlePromiseErr(e)}))}}])&&P(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function B(e){return B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},B(e)}function T(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function U(){return U="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=q(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},U.apply(this,arguments)}function q(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=D(e)););return e}function x(e,t){return x=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},x(e,t)}function R(e,t){if(t&&("object"===B(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function D(e){return D=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},D(e)}var A=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&x(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=D(r);if(o){var n=D(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return R(this,e)});function a(e){var t,n=e.popupSelector,r=e.handleFormSubmit;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,n))._handleFormSubmit=r,t._formConfirm=t._popup.querySelector(".form-confirm"),t}return t=a,(n=[{key:"setEventListeners",value:function(){var e=this;U(D(a.prototype),"setEventListeners",this).call(this),this._formConfirm.addEventListener("submit",(function(t){t.preventDefault(),e._handleFormSubmit()}))}},{key:"confirmDeleteMyCard",value:function(e){this._handleFormSubmit=e}}])&&T(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(l);function F(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var N=document.querySelector(".popup-open"),V=document.querySelector(".form-profile"),M=document.querySelector(".form__item_type_name"),J=document.querySelector(".form__item_type_job"),z=document.querySelector(".popup-cards"),G=document.querySelector(".add-open"),H=z.querySelector(".form-card"),W=document.querySelector(".profile__edit-photo"),$=document.querySelector(".popup-avatar"),K={formSelector:".form",inputSelector:".form__item",submitButtonSelector:".popup__save",inactiveButtonClass:"popup__save_disabled",inputErrorClass:"form__item-error_active",errorClass:"form__item_type_error"},Q=new I({baseUrl:"https://mesto.nomoreparties.co/v1/cohort-41/",headers:{authorization:"cce2dc6d-fce0-4adb-80f6-8b8fce306754","content-type":"application/json"}}),X=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=document.querySelector(".".concat(e," .popup__save"));n.textContent=t?"Загрузка...":"Сохранить"},Y=new a(K,V),Z=new a(K,H),ee=new a(K,$);Y.enableValidation(),Z.enableValidation(),ee.enableValidation();var te=new v({popupSelector:".popup-image",imagePhoto:".popup__photo",imageText:".popup__text"}),ne=function(e,t){te.open(e,t)};te.setEventListeners();var re=new A({popupSelector:".confirm-popup"}),oe=function(e){var t=new o({data:e,handleCardClick:ne,handleBinClick:function(){re.open(),re.confirmDeleteMyCard((function(){Q.deleteNewCard(t.getId()).then((function(){t.handleDeleteBinClick(),re.close()})).catch((function(e){console.log(e)}))}))},handleLikeClick:function(){t.isLiked()?Q.deleteLike(t.getId()).then((function(e){t.toggleLikesState(e)})).catch((function(e){return console.log(e)})):Q.putLikeCard(t.getId()).then((function(e){t.toggleLikesState(e)})).catch((function(e){return console.log(e)}))}},".card-template",ce.getUserId());return t.generateCard()},ie=new c((function(e){var t=oe(e);ie.addItem(t)}),".cards__elements"),ae=Q.getInitialCards().then((function(e){return e.map((function(e){return{name:e.name,link:e.link,id:e._id,ownerID:e.owner._id,likes:e.likes,likeCounter:e.likes.length}}))})).catch((function(e){console.log(e)}));G.addEventListener("click",(function(){Z.disableSubmitButton(),ue.open()}));var ue=new j(".popup-cards",(function(e){var t=e.link,n=e.name;X("popup-cards",!0),Q.addNewCard({name:n,link:t}).then((function(e){ie.addItem(oe({link:e.link,name:e.name,id:e._id,ownerID:e.owner._id,likeCounter:e.likes.length,likes:e.likes})),ue.close()})).catch((function(e){console.log(e)})).finally((function(){X("popup-cards",!1)}))})),ce=new L({username:".profile__name",job:".profile__job",avatar:".profile__avatar"}),se=Q.getUserInfoFromApi().then((function(e){return e})).catch((function(e){return console.log(e)}));N.addEventListener("click",(function(){Y.disableSubmitButton();var e=ce.getUserInfo();M.value=e.username,J.value=e.job,le.open()}));var le=new j(".popup-form",(function(e){var t=e.username,n=e.job;X("popup-form",!0),Q.addUserInfo({name:t,about:n}).then((function(e){ce.setUserInfo({username:e.name,job:e.about,avatar:e.avatar}),le.close()})).catch((function(e){console.log(e)})).finally((function(){X("popup-form",!1)}))}));Promise.all([ae,se]).then((function(e){var t,n,r=(n=2,function(e){if(Array.isArray(e))return e}(t=e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,u=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){u=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(u)throw o}}return i}}(t,n)||function(e,t){if(e){if("string"==typeof e)return F(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?F(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=r[0],i=r[1];ce.setUserId(i._id),ie.renderItems(o),ce.setUserInfo({username:i.name,job:i.about,avatar:i.avatar})})).catch((function(e){console.log(e)}));var fe=new j(".popup-avatar",(function(e){var t=e.avatar;X("popup-avatar",!0),Q.addUserAvatar({avatar:t}).then((function(e){ce.setUserInfo({username:e.name,job:e.about,avatar:e.avatar}),fe.close()})).catch((function(e){console.log(e)})).finally((function(){X("popup-avatar",!1)}))}));W.addEventListener("click",(function(){ee.disableSubmitButton(),fe.open()})),re.setEventListeners(),le.setEventListeners(),ue.setEventListeners(),fe.setEventListeners()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QWlCM0csV0FHbEJtRixPQUFNLFNBQUNDLEdBQ05DLFFBQVFDLElBQUlGLE1BRWJrQixTQUFRLFdBQ1ByQyxFQUFjLGNBQWMsU0FJbEN6QixRQUFRdUUsSUFBSSxDQUFDaEIsR0FBY1EsS0FDeEIxRCxNQUFLLFlBQWlDLEksSUFBQSxHLEVBQUEsRSw0Q0FBQSxJLGd4QkFBL0JtRSxFQUErQixLQUFwQlQsRUFBb0IsS0FDckNiLEdBQVN1QixVQUFVVixFQUFleEwsS0FDbEM4SyxHQUFXcUIsWUFBWUYsR0FDdkJ0QixHQUFTb0IsWUFBWSxDQUNuQnRGLFNBQVUrRSxFQUFlM0wsS0FDekI2RyxJQUFLOEUsRUFBZU0sTUFDcEJuRixPQUFRNkUsRUFBZTdFLFlBSzFCeUQsT0FBTSxTQUFDQyxHQUNOQyxRQUFRQyxJQUFJRixNQUloQixJQUFNK0IsR0FBYyxJQUFJdEcsRUFBYyxpQkFPdEMsWUFBNEMsSUFBVmEsRUFBVSxFQUFWQSxPQUNoQ3VDLEVBQWMsZ0JBQWdCLEdBQzlCRixFQUNHcUQsY0FBYyxDQUFFMUYsT0FBQUEsSUFDaEJtQixNQUFLLFNBQUN2SSxHQUNMb0wsR0FBU29CLFlBQVksQ0FDbkJ0RixTQUFVbEgsRUFBS00sS0FDZjZHLElBQUtuSCxFQUFLdU0sTUFDVm5GLE9BQVFwSCxFQUFLb0gsU0FFZnlGLEdBQVluSCxXQUVibUYsT0FBTSxTQUFDQyxHQUNOQyxRQUFRQyxJQUFJRixNQUVia0IsU0FBUSxXQUNQckMsRUFBYyxnQkFBZ0IsU0FyQnBDTCxFQUFhM0csaUJBQWlCLFNBQVMsV0FDckNzSCxHQUFlNUYsc0JBQ2Z3SSxHQUFZekMsVUF3QmRFLEdBQWFELG9CQUNiZ0MsR0FBaUJoQyxvQkFDakJ5QixHQUFjekIsb0JBQ2R3QyxHQUFZeEMscUIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvVXNlckluZm8uanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9BcGkuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhTdWJtaXQuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvcGFnZXMvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8g0LrQu9Cw0YHRgSDRgdC+0LfQtNCw0L3QuNGPINC60LDRgNGC0L7Rh9C60LhcclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2FyZCB7XHJcbiAgLy/QtNCw0L3QvdGL0LUg0LrQsNGA0YLQvtGH0LrQuCDQuCB0ZW1wbGF0ZVxyXG4gICNfdXNlcklEO1xyXG4gIGNvbnN0cnVjdG9yKFxyXG4gICAgeyBkYXRhLCBoYW5kbGVDYXJkQ2xpY2ssIGhhbmRsZUJpbkNsaWNrLCBoYW5kbGVMaWtlQ2xpY2sgfSxcclxuICAgIGNhcmRTZWxlY3RvcixcclxuICAgIHVzZXJJRFxyXG4gICkge1xyXG4gICAgdGhpcy5fdGV4dCA9IGRhdGEubmFtZTtcclxuICAgIHRoaXMuX2ltYWdlID0gZGF0YS5saW5rO1xyXG4gICAgdGhpcy5faWQgPSBkYXRhLmlkO1xyXG4gICAgdGhpcy5fbGlrZXMgPSBkYXRhLmxpa2VzO1xyXG4gICAgdGhpcy5fb3duZXJJRCA9IGRhdGEub3duZXJJRDtcclxuICAgIHRoaXMuX2NhcmRTZWxlY3RvciA9IGNhcmRTZWxlY3RvcjtcclxuICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljayA9IGhhbmRsZUNhcmRDbGljaztcclxuICAgIHRoaXMuI191c2VySUQgPSB1c2VySUQ7XHJcbiAgICB0aGlzLl9oYW5kbGVCaW5DbGljayA9IGhhbmRsZUJpbkNsaWNrO1xyXG4gICAgdGhpcy5faGFuZGxlTGlrZUNsaWNrID0gaGFuZGxlTGlrZUNsaWNrO1xyXG4gICAgdGhpcy5fbGlrZXNVc2VyID0gdGhpcy5fbGlrZXMuc29tZSgoaXRlbSkgPT4gaXRlbS5faWQgPT09IHRoaXMuI191c2VySUQpO1xyXG4gICAgdGhpcy5fbGlrZUNvdW50ZXIgPSBkYXRhLmxpa2VDb3VudGVyO1xyXG4gIH1cclxuXHJcbiAgX2dldFRlbXBsYXRlKCkge1xyXG4gICAgY29uc3QgcGhvdG9DYXJkID0gZG9jdW1lbnRcclxuICAgICAgLnF1ZXJ5U2VsZWN0b3IodGhpcy5fY2FyZFNlbGVjdG9yKVxyXG4gICAgICAuY29udGVudC5xdWVyeVNlbGVjdG9yKFwiLnBob3RvXCIpXHJcbiAgICAgIC5jbG9uZU5vZGUodHJ1ZSk7XHJcblxyXG4gICAgcmV0dXJuIHBob3RvQ2FyZDtcclxuICB9XHJcblxyXG4gIGdldElkKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX2lkO1xyXG4gIH1cclxuXHJcbiAgaXNMaWtlZCgpIHtcclxuICAgIHJldHVybiB0aGlzLl9saWtlc1VzZXI7XHJcbiAgfVxyXG5cclxuICAvL9C/0YDQuNGB0LLQsNC10LLQsNC10Lwg0LrQu9Cw0YHRgdGLINC30L3QsNGH0LXQvdC40Y/QvCDQutCw0YDRgtC+0YfQtdC6XHJcbiAgZ2VuZXJhdGVDYXJkKCkge1xyXG4gICAgdGhpcy5fZWxlbWVudCA9IHRoaXMuX2dldFRlbXBsYXRlKCk7XHJcbiAgICAvLyDQlNC+0LHQvtCy0LvRj9C10Lwg0LTQsNC90L3Ri9C1XHJcbiAgICB0aGlzLl9waG90b0ltYWdlID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLnBob3RvX19pbWFnZVwiKTtcclxuXHJcbiAgICB0aGlzLl9waG90b0ltYWdlLnNyYyA9IHRoaXMuX2ltYWdlO1xyXG4gICAgdGhpcy5fcGhvdG9JbWFnZS5hbHQgPSB0aGlzLl90ZXh0O1xyXG4gICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLnBob3RvX190ZXh0XCIpLnRleHRDb250ZW50ID0gdGhpcy5fdGV4dDtcclxuICAgIC8vIGJpblxyXG4gICAgdGhpcy5fYmluRWxlbWVudCA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5waG90b19fYmluXCIpO1xyXG4gICAgaWYgKHRoaXMuX293bmVySUQgPT09IHRoaXMuI191c2VySUQpIHtcclxuICAgICAgdGhpcy5fYmluRWxlbWVudC5jbGFzc0xpc3QuYWRkKFwicGhvdG9fX2Jpbl9hY3RpdmVcIik7XHJcbiAgICB9XHJcbiAgICAvLyBsaWtlXHJcbiAgICB0aGlzLl9lbGVtZW50TGlrZUJ1dHRvbiA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5waG90b19fdmVjdG9yXCIpO1xyXG4gICAgdGhpcy5fZWxlbWVudExpa2VDb3VudGVyID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLnBob3RvX19udW1saWtlXCIpO1xyXG4gICAgdGhpcy5fZWxlbWVudExpa2VDb3VudGVyLnRleHRDb250ZW50ID0gdGhpcy5fbGlrZUNvdW50ZXI7XHJcblxyXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgIHJldHVybiB0aGlzLl9lbGVtZW50O1xyXG4gIH1cclxuXHJcbiAgLy8gbGlrZSDQtNC+0LHQsNCy0LvQtdC90LjQtSDQuNC70Lgg0YPQtNCw0LvQtdC90LjQtVxyXG4gIHRvZ2dsZUxpa2VzU3RhdGUoZGF0YSkge1xyXG4gICAgdGhpcy5fZWxlbWVudExpa2VDb3VudGVyLnRleHRDb250ZW50ID0gZGF0YS5saWtlcy5sZW5ndGg7XHJcbiAgICB0aGlzLl9saWtlc1VzZXIgPSAhdGhpcy5fbGlrZXNVc2VyO1xyXG5cclxuICAgIGlmICh0aGlzLmlzTGlrZWQoKSkge1xyXG4gICAgICB0aGlzLl9lbGVtZW50TGlrZUJ1dHRvbi5jbGFzc0xpc3QuYWRkKFwicGhvdG9fX3ZlY3Rvcl9hY3RpdmVcIik7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9lbGVtZW50TGlrZUJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKFwicGhvdG9fX3ZlY3Rvcl9hY3RpdmVcIik7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvL2JpblxyXG4gIGhhbmRsZURlbGV0ZUJpbkNsaWNrKCkge1xyXG4gICAgdGhpcy5fZWxlbWVudC5yZW1vdmUoKTtcclxuICAgIHRoaXMuX2VsZW1lbnQgPSBudWxsO1xyXG4gIH1cclxuXHJcbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgLy8gbGlrZVxyXG4gICAgdGhpcy5fZWxlbWVudExpa2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChldnQpID0+IHtcclxuICAgICAgdGhpcy5faGFuZGxlTGlrZUNsaWNrKGV2dCk7XHJcbiAgICB9KTtcclxuICAgIC8vIGJpblxyXG4gICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLnBob3RvX19iaW5cIikuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgdGhpcy5faGFuZGxlQmluQ2xpY2soKTtcclxuICAgIH0pO1xyXG4gICAgLy8g0L7RgtC60YDRi9GC0LjQtSDQutCw0YDRgtC40L3QutC4XHJcbiAgICB0aGlzLl9waG90b0ltYWdlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljayh0aGlzLl90ZXh0LCB0aGlzLl9pbWFnZSk7XHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGNsYXNzIEZvcm1WYWxpZGF0b3Ige1xyXG4gIGNvbnN0cnVjdG9yKGRhdGEsIGZvcm1MaXN0KSB7XHJcbiAgICB0aGlzLl9mb3JtU2VsZWN0b3IgPSBkYXRhLmZvcm1TZWxlY3RvcjtcclxuICAgIHRoaXMuX2lucHV0U2VsZWN0b3IgPSBkYXRhLmlucHV0U2VsZWN0b3I7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3RvciA9IGRhdGEuc3VibWl0QnV0dG9uU2VsZWN0b3I7XHJcbiAgICB0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzID0gZGF0YS5pbmFjdGl2ZUJ1dHRvbkNsYXNzO1xyXG4gICAgdGhpcy5faW5wdXRFcnJvckNsYXNzID0gZGF0YS5pbnB1dEVycm9yQ2xhc3M7XHJcbiAgICB0aGlzLl9lcnJvckNsYXNzID0gZGF0YS5lcnJvckNsYXNzO1xyXG4gICAgLy9jb25zb2xlLmxvZyh0aGlzLl9pbnB1dFNlbGVjdG9yKVxyXG4gICAgdGhpcy5fZm9ybUxpc3QgPSBmb3JtTGlzdDtcclxuICAgIC8vY29uc29sZS5sb2cgKGZvcm1MaXN0KVxyXG4gICAgdGhpcy5fYnV0dG9uRWxlbWVudCA9IHRoaXMuX2Zvcm1MaXN0LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yXHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgLy/Qv9C+0LrQsNC30YvQstCw0LXRgiDRjdC70LXQvNC10L3RgiDQvtGI0LjQsdC60LhcclxuICBfc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50KSB7XHJcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtTGlzdC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBgIyR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmBcclxuICAgICk7XHJcbiAgICAvLyBjb25zb2xlLmxvZyhlcnJvckVsZW1lbnQpXHJcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9lcnJvckNsYXNzKTtcclxuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IGlucHV0RWxlbWVudC52YWxpZGF0aW9uTWVzc2FnZTtcclxuICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XHJcbiAgfVxyXG5cclxuICAvLyDRgdC60YDRi9Cy0LDQtdGCINGN0LvQtdC80LXQvdGCINC+0YjQuNCx0LrQuFxyXG4gIF9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpIHtcclxuICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm1MaXN0LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIGAjJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYFxyXG4gICAgKTtcclxuICAgIC8vY29uc29sZS5sb2coZXJyb3JFbGVtZW50KTtcclxuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2Vycm9yQ2xhc3MpO1xyXG4gICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcclxuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IFwiXCI7XHJcbiAgfVxyXG5cclxuICAvLyDQv9GA0L7QstC10YDQutCwINC40L3Qv9GD0YLQvtCyINC00LvRjyDQutC90L7Qv9C60LhcclxuICBfaGFzSW52YWxpZElucHV0KCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX2lucHV0TGlzdC5zb21lKChpbnB1dEVsZW1lbnQpID0+IHtcclxuICAgICAgcmV0dXJuICFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQ7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIC8vINGE0YPQvdC60YbQuNGPINCx0LvQvtC60LjRgNC+0LLQutC4INC60L3QvtC/0LrQuFxyXG4gIGRpc2FibGVTdWJtaXRCdXR0b24oKSB7XHJcbiAgICB0aGlzLl9idXR0b25FbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcblxyXG4gICAgdGhpcy5fYnV0dG9uRWxlbWVudC5kaXNhYmxlZCA9IHRydWU7XHJcbiAgICAvL2NvbnNvbGUubG9nKHRoaXMuX2J1dHRvbkVsZW1lbnQpXHJcbiAgfVxyXG5cclxuICBfZW5hYmxlU3VibWl0QnV0dG9uKCkge1xyXG4gICAgdGhpcy5fYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgdGhpcy5fYnV0dG9uRWxlbWVudC5kaXNhYmxlZCA9IGZhbHNlO1xyXG4gIH1cclxuXHJcbiAgLy8g0YTRg9C90LrRhtC40Y8g0L/QtdGA0LXQutC70Y7Rh9C10L3QuNGPINC60L3QvtC/0LrQuFxyXG5cclxuICBfdG9nZ2xlQnV0dG9uU3RhdGUoKSB7XHJcbiAgICAvLyDQldGB0LvQuCDQtdGB0YLRjCDRhdC+0YLRjyDQsdGLINC+0LTQuNC9INC90LXQstCw0LvQuNC00L3Ri9C5INC40L3Qv9GD0YJcclxuICAgIGlmICh0aGlzLl9oYXNJbnZhbGlkSW5wdXQoKSkge1xyXG4gICAgICAvLyDRgdC00LXQu9Cw0Lkg0LrQvdC+0L/QutGDINC90LXQsNC60YLQuNCy0L3QvtC5XHJcbiAgICAgIHRoaXMuZGlzYWJsZVN1Ym1pdEJ1dHRvbigpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgLy8g0LjQvdCw0YfQtSDRgdC00LXQu9Cw0Lkg0LrQvdC+0L/QutGDINCw0LrRgtC40LLQvdC+0LlcclxuICAgICAgdGhpcy5fZW5hYmxlU3VibWl0QnV0dG9uKCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvLyDQv9GA0L7QstC10YDQutCwINC90LAg0LLQsNC70LjQtNC90L7RgdGC0Ywg0L/QvtC70LXQuVxyXG4gIF9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KSB7XHJcbiAgICBpZiAoIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCkge1xyXG4gICAgICAvL2NvbnNvbGUubG9nKGlucHV0RWxlbWVudC52YWxpZGF0aW9uTWVzc2FnZSlcclxuICAgICAgdGhpcy5fc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvLyDRhNGD0L3QutGG0LjRjyDQv9C10YDQtdCx0L7RgNCwINCy0YHQtdGFIGlucHV0cyDRhNC+0YDQvFxyXG4gIGVuYWJsZVZhbGlkYXRpb24oKSB7XHJcbiAgICB0aGlzLl9pbnB1dExpc3QgPSBBcnJheS5mcm9tKFxyXG4gICAgICB0aGlzLl9mb3JtTGlzdC5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2lucHV0U2VsZWN0b3IpXHJcbiAgICApO1xyXG4gICAgLy9jb25zb2xlLmxvZyh0aGlzLl9pbnB1dExpc3QpXHJcblxyXG4gICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcclxuICAgICAgaW5wdXRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5fY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCk7XHJcbiAgICAgICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2VjdGlvbiB7XHJcbiAgY29uc3RydWN0b3IocmVuZGVyZXIsIGNvbnRhaW5lclNlbGVjdG9yKSB7XHJcbiAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xyXG4gICAgdGhpcy5fY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihjb250YWluZXJTZWxlY3Rvcik7XHJcbiAgfVxyXG5cclxuICAvLyDQtNC+0LHQsNCy0LvQtdC90L3QsNGPINC60LDRgNGC0L7Rh9C60LAg0L7RgtGA0LjRgdC+0LLRi9Cy0LDQtdGC0YHRjyDQsiDQvdCw0YfQsNC70LVcclxuICBhZGRJdGVtKGNhcmRFbGVtZW50KSB7XHJcbiAgICB0aGlzLl9jb250YWluZXIucHJlcGVuZChjYXJkRWxlbWVudCk7XHJcbiAgfVxyXG5cclxuICByZW5kZXJJdGVtcyhpdGVtcykge1xyXG4gICAgaXRlbXMuZm9yRWFjaCgoaXRlbSkgPT4ge1xyXG4gICAgICB0aGlzLl9yZW5kZXJlcihpdGVtKTtcclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xyXG4gICAgdGhpcy5fcG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvcHVwU2VsZWN0b3IpO1xyXG4gIH1cclxuXHJcbiAgLy/RhNGD0L3QutGG0LjRjyDQvtGC0LrRgNGL0YLQuNGPINC/0L7Qvy3QsNC/0L7QslxyXG4gIG9wZW4oKSB7XHJcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XHJcbiAgICB0aGlzLl9wb3B1cC5jbGFzc0xpc3QuYWRkKFwicG9wdXBfYWN0aXZlXCIpOyAvL9GE0YPQvdC60YbQuNGPINC00LvRjyDQvtGC0LrRgNGL0YLQuNGPINC/0L7Qvy3QsNC/0LBcclxuICB9XHJcbiAgLy/RhNGD0L3QutGG0LjRjyDQt9Cw0LrRgNGL0YLQuNGPINC/0L7Qvy3QsNC/0L7QslxyXG4gIGNsb3NlKCkge1xyXG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xyXG4gICAgdGhpcy5fcG9wdXAuY2xhc3NMaXN0LnJlbW92ZShcInBvcHVwX2FjdGl2ZVwiKTsgLy/RhNGD0L3QutGG0LjRjyDQtNC70Y8g0LfQsNC60YDRi9GC0LjRj1xyXG4gIH1cclxuXHJcbiAgLy/Qt9Cw0LrRgNGL0YLQuNC1INC/0L7Qvy3QsNC/0LAg0L3QsCBlc2N1cFxyXG4gIF9oYW5kbGVFc2NDbG9zZSA9IChldnQpID0+IHtcclxuICAgIGlmIChldnQua2V5ID09PSBcIkVzY2FwZVwiKSB7XHJcbiAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICAvL9GB0LvRg9GI0LDRgtC10LvRjCDQtNC70Y8g0LfQsNC60YDRi9GC0LjRjyDQv9C+0L8t0LDQv9CwINC90LAgb3ZlcmxheSDQuCDQutGA0LXRgdGC0LjQulxyXG5cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX3BvcHVwLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgKGV2ZW50KSA9PiB7XHJcbiAgICAgIGlmIChcclxuICAgICAgICBldmVudC50YXJnZXQgPT09IHRoaXMuX3BvcHVwIHx8XHJcbiAgICAgICAgZXZlbnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcInBvcHVwX19jbG9zZVwiKVxyXG4gICAgICApIHtcclxuICAgICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcclxuLy/Qv9C+0L8t0L/QsNC/INGBINC60LDRgNGC0LjQvdC60L7QuVxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcih7IHBvcHVwU2VsZWN0b3IsIGltYWdlUGhvdG8sIGltYWdlVGV4dCB9KSB7XHJcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcclxuICAgIHRoaXMuX2ltYWdlUGhvdG8gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGltYWdlUGhvdG8pO1xyXG4gICAgdGhpcy5faW1hZ2VUZXh0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihpbWFnZVRleHQpO1xyXG4gIH1cclxuICAvLyDQvtGC0LrRgNGL0YLQuNC1INC/0L7Qvy3QsNC/0LBcclxuICBvcGVuKGNhcmRuYW1lLCBsaW5rKSB7XHJcbiAgICB0aGlzLl9pbWFnZVBob3RvLnNyYyA9IGxpbms7XHJcbiAgICB0aGlzLl9pbWFnZVBob3RvLmFsdCA9IGNhcmRuYW1lO1xyXG4gICAgdGhpcy5faW1hZ2VUZXh0LnRleHRDb250ZW50ID0gY2FyZG5hbWU7XHJcbiAgICBzdXBlci5vcGVuKCk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yLCBoYW5kbGVGb3JtU3VibWl0KSB7XHJcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcclxuICAgIHRoaXMuX3BvcHVwRm9ybUNhcmQgPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKFwiLmZvcm1cIik7XHJcbiAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0ID0gaGFuZGxlRm9ybVN1Ym1pdDtcclxuICAgIHRoaXMuX2lucHV0TGlzdCA9IEFycmF5LmZyb20oXHJcbiAgICAgIHRoaXMuX3BvcHVwRm9ybUNhcmQucXVlcnlTZWxlY3RvckFsbChcIi5mb3JtX19pdGVtXCIpXHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgX2dldElucHV0VmFsdWVzKCkge1xyXG4gICAgY29uc3QgaW5wdXRWYWx1ZXMgPSB7fTtcclxuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dCkgPT4ge1xyXG4gICAgICBpbnB1dFZhbHVlc1tpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlO1xyXG4gICAgfSk7XHJcbiAgICAvLyBjb25zb2xlLmxvZyhpbnB1dFZhbHVlcylcclxuICAgIHJldHVybiBpbnB1dFZhbHVlcztcclxuICB9XHJcblxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgIHRoaXMuX3BvcHVwRm9ybUNhcmQuYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZXZ0KSA9PiB7XHJcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0KHRoaXMuX2dldElucHV0VmFsdWVzKCkpO1xyXG4gICAgfSk7XHJcbiAgICAvL2NvbnNvbGUubG9nKHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQpXHJcbiAgfVxyXG5cclxuICBjbG9zZSgpIHtcclxuICAgIHN1cGVyLmNsb3NlKCk7XHJcbiAgICB0aGlzLl9wb3B1cEZvcm1DYXJkLnJlc2V0KCk7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFVzZXJJbmZvIHtcclxuICBjb25zdHJ1Y3Rvcih7IHVzZXJuYW1lLCBqb2IsIGF2YXRhciB9KSB7XHJcbiAgICB0aGlzLl91c2VybmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodXNlcm5hbWUpO1xyXG4gICAgdGhpcy5fam9iID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihqb2IpO1xyXG4gICAgdGhpcy5fYXZhdGFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihhdmF0YXIpO1xyXG4gIH1cclxuXHJcbiAgZ2V0VXNlckluZm8oKSB7XHJcbiAgICBjb25zdCBpbnB1dFVzZXJJbmZvID0ge1xyXG4gICAgICB1c2VybmFtZTogdGhpcy5fdXNlcm5hbWUudGV4dENvbnRlbnQsXHJcbiAgICAgIGpvYjogdGhpcy5fam9iLnRleHRDb250ZW50LFxyXG4gICAgfTtcclxuICAgIHJldHVybiBpbnB1dFVzZXJJbmZvO1xyXG4gIH1cclxuXHJcbiAgc2V0VXNlckluZm8oeyB1c2VybmFtZSwgam9iLCBhdmF0YXIgfSkge1xyXG4gICAgKHRoaXMuX2pvYi50ZXh0Q29udGVudCA9IGpvYiksICh0aGlzLl91c2VybmFtZS50ZXh0Q29udGVudCA9IHVzZXJuYW1lKTtcclxuICAgIHRoaXMuX2F2YXRhci5zcmMgPSBhdmF0YXI7XHJcbiAgfVxyXG5cclxuICBnZXRVc2VySWQoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5fdXNlcklEO1xyXG4gIH1cclxuXHJcbiAgc2V0VXNlcklkKGlkKSB7XHJcbiAgICB0aGlzLl91c2VySUQgPSBpZDtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQXBpIHtcclxuICBjb25zdHJ1Y3Rvcihjb25maWcpIHtcclxuICAgIHRoaXMuX2Jhc2VVcmwgPSBjb25maWcuYmFzZVVybDtcclxuICAgIHRoaXMuX2hlYWRlcnMgPSBjb25maWcuaGVhZGVycztcclxuICAgIC8vY29uc29sZS5sb2coY29uZmlnLmJhc2VVcmwpO1xyXG4gIH1cclxuXHJcbiAgX2hhbmRsZVByb21pc2VFcnIocmVzKSB7XHJcbiAgICBpZiAocmVzLm9rKSB7XHJcbiAgICAgIHJldHVybiByZXMuanNvbigpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGDQntGI0LjQsdC60LA6ICR7cmVzLnN0YXR1c31gKTtcclxuICB9XHJcblxyXG4gIC8vINC/0L7Qu9GD0YfQtdC90LjQtSDQtNCw0L3QvdGL0YUg0L/QvtC70YzQt9C+0LLQsNGC0LXQu9GPXHJcbiAgZ2V0VXNlckluZm9Gcm9tQXBpKCkge1xyXG4gICAgcmV0dXJuIGZldGNoKHRoaXMuX2Jhc2VVcmwgKyBcIi91c2Vycy9tZVwiLCB7XHJcbiAgICAgIG1ldGhvZDogXCJHRVRcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgIH0pLnRoZW4oKHJlcykgPT4gdGhpcy5faGFuZGxlUHJvbWlzZUVycihyZXMpKTtcclxuICB9XHJcbiAgLy8g0L/QvtC70YPRh9C10L3QuNC1INC60LDRgNGC0LjQvdC+0LpcclxuICBnZXRJbml0aWFsQ2FyZHMoKSB7XHJcbiAgICByZXR1cm4gZmV0Y2godGhpcy5fYmFzZVVybCArIFwiL2NhcmRzXCIsIHtcclxuICAgICAgbWV0aG9kOiBcIkdFVFwiLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgfSkudGhlbigocmVzKSA9PiB0aGlzLl9oYW5kbGVQcm9taXNlRXJyKHJlcykpO1xyXG4gIH1cclxuXHJcbiAgLy/QtNC+0LHQsNCy0LjRgtGMINC90L7QstC+0LPQviDQv9C+0LvRjNC30L7QstCw0YLQtdC70Y9cclxuICBhZGRVc2VySW5mbyhkYXRhKSB7XHJcbiAgICByZXR1cm4gZmV0Y2godGhpcy5fYmFzZVVybCArIFwiL3VzZXJzL21lXCIsIHtcclxuICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGRhdGEpLFxyXG4gICAgfSkudGhlbigocmVzKSA9PiB0aGlzLl9oYW5kbGVQcm9taXNlRXJyKHJlcykpO1xyXG4gIH1cclxuXHJcbiAgLy/QlNC+0LHQsNCy0LjRgtGMINC90L7QstGD0Y4g0LrQsNGA0YLQuNC90LrRgy5cclxuICBhZGROZXdDYXJkKGRhdGEpIHtcclxuICAgIHJldHVybiBmZXRjaCh0aGlzLl9iYXNlVXJsICsgXCIvY2FyZHNcIiwge1xyXG4gICAgICBtZXRob2Q6IFwiUE9TVFwiLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShkYXRhKSxcclxuICAgIH0pLnRoZW4oKHJlcykgPT4gdGhpcy5faGFuZGxlUHJvbWlzZUVycihyZXMpKTtcclxuICB9XHJcblxyXG4gIC8v0LTQvtCx0LDQstC40YLRjCDQvdC+0LLQvtCz0L4g0L/QvtC70YzQt9C+0LLQsNGC0LXQu9GPXHJcbiAgYWRkVXNlckF2YXRhcihhdmF0YXIpIHtcclxuICAgIHJldHVybiBmZXRjaCh0aGlzLl9iYXNlVXJsICsgXCIvdXNlcnMvbWUvYXZhdGFyXCIsIHtcclxuICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGF2YXRhciksXHJcbiAgICB9KS50aGVuKChyZXMpID0+IHRoaXMuX2hhbmRsZVByb21pc2VFcnIocmVzKSk7XHJcbiAgfVxyXG5cclxuICAvL9Cj0LTQsNC70LjRgtGMINC90L7QstGD0Y4g0LrQsNGA0YLQuNC90LrRgy5cclxuICBkZWxldGVOZXdDYXJkKGlkKSB7XHJcbiAgICByZXR1cm4gZmV0Y2godGhpcy5fYmFzZVVybCArIGAvY2FyZHMvJHtpZH1gLCB7XHJcbiAgICAgIG1ldGhvZDogXCJERUxFVEVcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgIH0pLnRoZW4oKHJlcykgPT4gdGhpcy5faGFuZGxlUHJvbWlzZUVycihyZXMpKTtcclxuICB9XHJcblxyXG4gIC8v0JTQvtCx0LDQstC40YLRjCBsaWtlINC60LDRgNGC0LjQvdC60LUuXHJcbiAgcHV0TGlrZUNhcmQoaWQpIHtcclxuICAgIHJldHVybiBmZXRjaCh0aGlzLl9iYXNlVXJsICsgYC9jYXJkcy8ke2lkfS9saWtlc2AsIHtcclxuICAgICAgbWV0aG9kOiBcIlBVVFwiLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgfSkudGhlbigocmVzKSA9PiB0aGlzLl9oYW5kbGVQcm9taXNlRXJyKHJlcykpO1xyXG4gIH1cclxuXHJcbiAgLy/Qo9C00LDQu9C40YLRjCBsaWtlINC60LDRgNGC0LjQvdC60LguXHJcbiAgZGVsZXRlTGlrZShpZCkge1xyXG4gICAgcmV0dXJuIGZldGNoKHRoaXMuX2Jhc2VVcmwgKyBgL2NhcmRzLyR7aWR9L2xpa2VzYCwge1xyXG4gICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICB9KS50aGVuKChyZXMpID0+IHRoaXMuX2hhbmRsZVByb21pc2VFcnIocmVzKSk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoU3VibWl0IGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHsgcG9wdXBTZWxlY3RvciwgaGFuZGxlRm9ybVN1Ym1pdCB9KSB7XHJcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcclxuICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQgPSBoYW5kbGVGb3JtU3VibWl0O1xyXG4gICAgdGhpcy5fZm9ybUNvbmZpcm0gPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKFwiLmZvcm0tY29uZmlybVwiKTtcclxuICB9XHJcblxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgIHRoaXMuX2Zvcm1Db25maXJtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGV2dCkgPT4ge1xyXG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCgpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBjb25maXJtRGVsZXRlTXlDYXJkKG15Q2FyZCkge1xyXG4gICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCA9IG15Q2FyZDtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IENhcmQgZnJvbSBcIi4uL2NvbXBvbmVudHMvQ2FyZC5qc1wiO1xyXG5pbXBvcnQgeyBGb3JtVmFsaWRhdG9yIH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qc1wiO1xyXG5pbXBvcnQgeyBpdGVtcyB9IGZyb20gXCIuLi91dGlscy91dGlscy5qc1wiO1xyXG5pbXBvcnQgU2VjdGlvbiBmcm9tIFwiLi4vY29tcG9uZW50cy9TZWN0aW9uLmpzXCI7XHJcbmltcG9ydCBQb3B1cFdpdGhJbWFnZSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qc1wiO1xyXG5pbXBvcnQgUG9wdXBXaXRoRm9ybSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzXCI7XHJcbmltcG9ydCBVc2VySW5mbyBmcm9tIFwiLi4vY29tcG9uZW50cy9Vc2VySW5mby5qc1wiO1xyXG5pbXBvcnQgXCIuLi9wYWdlcy9pbmRleC5jc3NcIjtcclxuaW1wb3J0IEFwaSBmcm9tIFwiLi4vY29tcG9uZW50cy9BcGkuanNcIjtcclxuaW1wb3J0IFBvcHVwV2l0aFN1Ym1pdCBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhTdWJtaXQuanNcIjtcclxuXHJcbmNvbnN0IHByb2ZpbGVPcGVuQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cC1vcGVuXCIpOyAvL9C60L3QvtC/0LrQsCDQvtGC0LrRgNGL0YLQuNGPINC/0L7Qvy3QsNC/0LBcclxuY29uc3QgcHJvZmlsZUZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmZvcm0tcHJvZmlsZVwiKTtcclxuLy8g0J3QsNGF0L7QtNC40Lwg0L/QvtC70Y8g0YTQvtGA0LzRiyDQsiBET01cclxuY29uc3QgbmFtZUlucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5mb3JtX19pdGVtX3R5cGVfbmFtZVwiKTsgLy8g0JLQvtGB0L/QvtC70YzQt9GD0LnRgtC10YHRjCDQuNC90YHRgtGA0YPQvNC10L3RgtC+0LwgLnF1ZXJ5U2VsZWN0b3IoKVxyXG5jb25zdCBqb2JJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybV9faXRlbV90eXBlX2pvYlwiKTsgLy8g0JLQvtGB0L/QvtC70YzQt9GD0LnRgtC10YHRjCDQuNC90YHRgtGA0YPQvNC10L3RgtC+0LwgLnF1ZXJ5U2VsZWN0b3IoKVxyXG5cclxuY29uc3QgY2FyZHNQb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXAtY2FyZHNcIik7IC8v0L/QvtC/LdC/0LDQvyDRhNC+0YDQvNGLINGBINC60LDRgNGC0LjQvdC60LDQvNC4XHJcbmNvbnN0IGNhcmRPcGVuQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5hZGQtb3BlblwiKTsgLy/QutC90L7Qv9C60LAg0L7RgtC60YDRi9GC0LjRjyDRhNC+0YDQvNGLINC/0L7Qvy3QsNC/0LAg0YEg0LrQsNGA0YLQuNC90LrQsNC80LhcclxuXHJcbi8vY29uc3QgY2FyZHNDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRzX19lbGVtZW50c1wiKTsgLy8g0YHQv9C40YHQvtC6INC60L7QvdGC0LXQudC90LXRgFxyXG5jb25zdCBmb3JtQ2FyZCA9IGNhcmRzUG9wdXAucXVlcnlTZWxlY3RvcihcIi5mb3JtLWNhcmRcIik7IC8v0LTQu9GPINGB0L7Qt9C00LDQvdC40Y8g0LrQsNGA0YLQvtGH0LrQuCDQutCw0YDRgtC40L3QutC4XHJcbmNvbnN0IGF2YXRhckJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fZWRpdC1waG90b1wiKTtcclxuY29uc3QgYXZhdGFyUG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwLWF2YXRhclwiKTtcclxuXHJcbmNvbnN0IG9iaiA9IHtcclxuICBmb3JtU2VsZWN0b3I6IFwiLmZvcm1cIixcclxuICBpbnB1dFNlbGVjdG9yOiBcIi5mb3JtX19pdGVtXCIsXHJcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLnBvcHVwX19zYXZlXCIsXHJcbiAgaW5hY3RpdmVCdXR0b25DbGFzczogXCJwb3B1cF9fc2F2ZV9kaXNhYmxlZFwiLFxyXG4gIGlucHV0RXJyb3JDbGFzczogXCJmb3JtX19pdGVtLWVycm9yX2FjdGl2ZVwiLFxyXG4gIGVycm9yQ2xhc3M6IFwiZm9ybV9faXRlbV90eXBlX2Vycm9yXCIsXHJcbn07XHJcblxyXG5jb25zdCBhcGkgPSBuZXcgQXBpKHtcclxuICBiYXNlVXJsOiBcImh0dHBzOi8vbWVzdG8ubm9tb3JlcGFydGllcy5jby92MS9jb2hvcnQtNDEvXCIsXHJcbiAgaGVhZGVyczoge1xyXG4gICAgYXV0aG9yaXphdGlvbjogXCJjY2UyZGM2ZC1mY2UwLTRhZGItODBmNi04YjhmY2UzMDY3NTRcIixcclxuICAgIFwiY29udGVudC10eXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxyXG4gIH0sXHJcbn0pO1xyXG5cclxuY29uc3QgcmVuZGVyTG9hZGluZyA9IChwb3B1cCwgaXNMb2FkaW5nID0gZmFsc2UpID0+IHtcclxuICBjb25zdCBjdXJyZW50QWN0aXZlQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgLiR7cG9wdXB9IC5wb3B1cF9fc2F2ZWApO1xyXG4gIGlmIChpc0xvYWRpbmcpIHtcclxuICAgIGN1cnJlbnRBY3RpdmVCdXR0b24udGV4dENvbnRlbnQgPSBcItCX0LDQs9GA0YPQt9C60LAuLi5cIjtcclxuICB9IGVsc2Uge1xyXG4gICAgY3VycmVudEFjdGl2ZUJ1dHRvbi50ZXh0Q29udGVudCA9IFwi0KHQvtGF0YDQsNC90LjRgtGMXCI7XHJcbiAgfVxyXG59O1xyXG5cclxuLy/QstCw0LvQuNC00LDRhtC40Y8g0YTQvtGA0LxcclxuY29uc3QgdmFsaWRpdHlGb3JtID0gbmV3IEZvcm1WYWxpZGF0b3Iob2JqLCBwcm9maWxlRm9ybSk7XHJcbmNvbnN0IHZhbGlkaXR5Q2FyZCA9IG5ldyBGb3JtVmFsaWRhdG9yKG9iaiwgZm9ybUNhcmQpO1xyXG5jb25zdCB2YWxpZGl0eUF2YXRhciA9IG5ldyBGb3JtVmFsaWRhdG9yKG9iaiwgYXZhdGFyUG9wdXApO1xyXG5cclxudmFsaWRpdHlGb3JtLmVuYWJsZVZhbGlkYXRpb24oKTtcclxudmFsaWRpdHlDYXJkLmVuYWJsZVZhbGlkYXRpb24oKTtcclxudmFsaWRpdHlBdmF0YXIuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG5cclxuLy/Qv9C+0L8t0L/QsNC/INGBINC60LDRgNGC0LjQvdC60L7QuSwg0L/RgNC40YHQstC+0LXQvdC40LUg0LfQvdCw0YfQtdC90LjQuSAo0Y3RgtC+INC90LUg0LLQvtC70YjQtdCx0YHRgtCy0L4pXHJcbmNvbnN0IHBvcHVwV2l0aE9wZW5JbWFnZSA9IG5ldyBQb3B1cFdpdGhJbWFnZSh7XHJcbiAgcG9wdXBTZWxlY3RvcjogXCIucG9wdXAtaW1hZ2VcIixcclxuICBpbWFnZVBob3RvOiBcIi5wb3B1cF9fcGhvdG9cIixcclxuICBpbWFnZVRleHQ6IFwiLnBvcHVwX190ZXh0XCIsXHJcbn0pO1xyXG4vLyDRhNGD0L3QutGG0LjRjyDQtNC70Y8g0L7RgtC60YDRi9GC0LjRjyDQv9C+0L8t0L/QsNC/0LAg0LrQsNGA0YLQuNC90LrQuFxyXG5jb25zdCBoYW5kbGVDYXJkQ2xpY2sgPSAobmFtZSwgbGluaykgPT4ge1xyXG4gIHBvcHVwV2l0aE9wZW5JbWFnZS5vcGVuKG5hbWUsIGxpbmspO1xyXG59O1xyXG5wb3B1cFdpdGhPcGVuSW1hZ2Uuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbi8v0L/QvtC/0LDQvyDRgdC+0LPQu9Cw0YHQuNGPINC/0YDQuCDRg9C00LDQu9C10L3QuNC4INC60LDRgNGC0LjQvdC60LhcclxuY29uc3QgcG9wdXBDb25maXJtID0gbmV3IFBvcHVwV2l0aFN1Ym1pdCh7IHBvcHVwU2VsZWN0b3I6IFwiLmNvbmZpcm0tcG9wdXBcIiB9KTtcclxuXHJcbi8v0YHQvtC30LTQsNC90LjQtSDQutCw0YDRgtC+0YfQutC4INC4INGC0LXQvNC/0LvQtdC50YLQsCDQuCDRhNGD0L3QutGG0LjRjyDQvtGC0LrRgNGL0YLQuNGPINC60LDRgNGC0LjQvdC60LhcclxuY29uc3QgY3JlYXRlQ2FyZCA9IChpdGVtKSA9PiB7XHJcbiAgY29uc3QgY2FyZCA9IG5ldyBDYXJkKFxyXG4gICAge1xyXG4gICAgICBkYXRhOiBpdGVtLFxyXG4gICAgICBoYW5kbGVDYXJkQ2xpY2ssXHJcbiAgICAgIGhhbmRsZUJpbkNsaWNrOiAoKSA9PiB7XHJcbiAgICAgICAgcG9wdXBDb25maXJtLm9wZW4oKTtcclxuICAgICAgICAvL2NvbnN0IGNhcmRJZCA9IGNhcmQuZ2V0SWQoKTtcclxuICAgICAgICBwb3B1cENvbmZpcm0uY29uZmlybURlbGV0ZU15Q2FyZCgoKSA9PiB7XHJcbiAgICAgICAgICBhcGlcclxuICAgICAgICAgICAgLmRlbGV0ZU5ld0NhcmQoY2FyZC5nZXRJZCgpKVxyXG4gICAgICAgICAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ2Zpb2FzZmlqbycpXHJcbiAgICAgICAgICAgICAgY2FyZC5oYW5kbGVEZWxldGVCaW5DbGljaygpO1xyXG4gICAgICAgICAgICAgIHBvcHVwQ29uZmlybS5jbG9zZSgpO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9LFxyXG5cclxuICAgICAgaGFuZGxlTGlrZUNsaWNrOiAoKSA9PiB7XHJcbiAgICAgICAgaWYgKCFjYXJkLmlzTGlrZWQoKSkge1xyXG4gICAgICAgICAgYXBpXHJcbiAgICAgICAgICAgIC5wdXRMaWtlQ2FyZChjYXJkLmdldElkKCkpXHJcbiAgICAgICAgICAgIC50aGVuKChkYXRhKSA9PiB7XHJcbiAgICAgICAgICAgICAgY2FyZC50b2dnbGVMaWtlc1N0YXRlKGRhdGEpO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuY2F0Y2goKGVycikgPT4gY29uc29sZS5sb2coZXJyKSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIGFwaVxyXG4gICAgICAgICAgICAuZGVsZXRlTGlrZShjYXJkLmdldElkKCkpXHJcbiAgICAgICAgICAgIC50aGVuKChkYXRhKSA9PiB7XHJcbiAgICAgICAgICAgICAgY2FyZC50b2dnbGVMaWtlc1N0YXRlKGRhdGEpO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuY2F0Y2goKGVycikgPT4gY29uc29sZS5sb2coZXJyKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9LFxyXG4gICAgfSxcclxuICAgIFwiLmNhcmQtdGVtcGxhdGVcIixcclxuICAgIHVzZXJJbmZvLmdldFVzZXJJZCgpXHJcbiAgKTtcclxuICBjb25zdCBjYXJkRWxlbWVudCA9IGNhcmQuZ2VuZXJhdGVDYXJkKCk7XHJcbiAgcmV0dXJuIGNhcmRFbGVtZW50O1xyXG59O1xyXG5cclxuLy8g0LzQsNGB0YHQuNCyINGBINC60LDRgNGC0L7Rh9C60LDQvNC4INCy0YHRgtCw0LLQu9GP0LXQvCDQsiDQv9GA0L7QtdC60YJcclxuZnVuY3Rpb24gY2FyZFJlbmRlcmVyKGl0ZW0pIHtcclxuICBjb25zdCBjYXJkRWxlbWVudCA9IGNyZWF0ZUNhcmQoaXRlbSk7XHJcbiAgcmVuZGVyQ2FyZC5hZGRJdGVtKGNhcmRFbGVtZW50KTtcclxufVxyXG5cclxuY29uc3QgcmVuZGVyQ2FyZCA9IG5ldyBTZWN0aW9uKGNhcmRSZW5kZXJlciwgXCIuY2FyZHNfX2VsZW1lbnRzXCIpO1xyXG5cclxuY29uc3QgaW5pdGlhbGNhcmRzID0gYXBpXHJcbiAgLmdldEluaXRpYWxDYXJkcygpXHJcbiAgLnRoZW4oKHJlc3VsdCkgPT4ge1xyXG4gICAgLy8g0L7QsdGA0LDQsdCw0YLRi9Cy0LDQtdC8INGA0LXQt9GD0LvRjNGC0LDRglxyXG4gICAgY29uc3QgY2FyZHNJbml0ID0gcmVzdWx0Lm1hcCgoaXRlbSkgPT4gKHtcclxuICAgICAgbmFtZTogaXRlbS5uYW1lLFxyXG4gICAgICBsaW5rOiBpdGVtLmxpbmssXHJcbiAgICAgIGlkOiBpdGVtLl9pZCxcclxuICAgICAgb3duZXJJRDogaXRlbS5vd25lci5faWQsXHJcbiAgICAgIGxpa2VzOiBpdGVtLmxpa2VzLFxyXG4gICAgICBsaWtlQ291bnRlcjogaXRlbS5saWtlcy5sZW5ndGgsXHJcbiAgICB9KSk7XHJcblxyXG4gICAgcmV0dXJuIGNhcmRzSW5pdDtcclxuICB9KVxyXG4gIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICBjb25zb2xlLmxvZyhlcnIpOyAvLyDQstGL0LLQtdC00LXQvCDQvtGI0LjQsdC60YMg0LIg0LrQvtC90YHQvtC70YxcclxuICB9KTtcclxuXHJcbi8vINC+0YLQutGA0YvRgtC40LUg0L/QvtC/LdCw0L/QsCDQtNC+0LHQvtCy0LvQtdC90LjRjyDQutCw0YDRgtC40L3QutC4XHJcbmNhcmRPcGVuQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XHJcbiAgdmFsaWRpdHlDYXJkLmRpc2FibGVTdWJtaXRCdXR0b24oKTtcclxuICBwb3B1cFdpdGhDYXJkLm9wZW4oKTtcclxufSk7XHJcblxyXG4vLyDQv9C+0L8t0L/QsNC/INGBINC60LDRgNGC0LjQvdC60L7QuVxyXG5jb25zdCBwb3B1cFdpdGhDYXJkID0gbmV3IFBvcHVwV2l0aEZvcm0oXCIucG9wdXAtY2FyZHNcIiwgaGFuZGxlQ2FyZEFkZFN1Ym1pdCk7XHJcblxyXG5mdW5jdGlvbiBoYW5kbGVDYXJkQWRkU3VibWl0KHsgbGluaywgbmFtZSB9KSB7XHJcbiAgcmVuZGVyTG9hZGluZyhcInBvcHVwLWNhcmRzXCIsIHRydWUpO1xyXG4gIGFwaVxyXG4gICAgLmFkZE5ld0NhcmQoeyBuYW1lLCBsaW5rIH0pXHJcbiAgICAudGhlbigoZGF0YSkgPT4ge1xyXG4gICAgICByZW5kZXJDYXJkLmFkZEl0ZW0oXHJcbiAgICAgICAgY3JlYXRlQ2FyZCh7XHJcbiAgICAgICAgICBsaW5rOiBkYXRhLmxpbmssXHJcbiAgICAgICAgICBuYW1lOiBkYXRhLm5hbWUsXHJcbiAgICAgICAgICBpZDogZGF0YS5faWQsXHJcbiAgICAgICAgICBvd25lcklEOiBkYXRhLm93bmVyLl9pZCxcclxuICAgICAgICAgIGxpa2VDb3VudGVyOiBkYXRhLmxpa2VzLmxlbmd0aCxcclxuICAgICAgICAgIGxpa2VzOiBkYXRhLmxpa2VzLFxyXG4gICAgICAgIH0pXHJcbiAgICAgICk7XHJcbiAgICAgIHBvcHVwV2l0aENhcmQuY2xvc2UoKTtcclxuICAgIH0pXHJcbiAgICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICBjb25zb2xlLmxvZyhlcnIpO1xyXG4gICAgfSlcclxuICAgIC5maW5hbGx5KCgpID0+IHtcclxuICAgICAgcmVuZGVyTG9hZGluZyhcInBvcHVwLWNhcmRzXCIsIGZhbHNlKTtcclxuICAgIH0pO1xyXG59XHJcblxyXG4vLyDQv9C+0L8t0L/QsNC/INC/0YDQvtGE0LjQu9GMXHJcbmNvbnN0IHVzZXJJbmZvID0gbmV3IFVzZXJJbmZvKHtcclxuICB1c2VybmFtZTogXCIucHJvZmlsZV9fbmFtZVwiLFxyXG4gIGpvYjogXCIucHJvZmlsZV9fam9iXCIsXHJcbiAgYXZhdGFyOiBcIi5wcm9maWxlX19hdmF0YXJcIixcclxufSk7XHJcblxyXG4vL9C/0L7Qu9GD0YfQtdC90LjQtSDQtNCw0L3QvdGL0YUg0LTQu9GPINC/0YDQvtGE0LjQu9GPXHJcbmNvbnN0IGdldFVzZXJJbmZvQXBpID0gYXBpXHJcbiAgLmdldFVzZXJJbmZvRnJvbUFwaSgpXHJcbiAgLnRoZW4oKGdldFVzZXJJbmZvQXBpKSA9PiB7XHJcbiAgICByZXR1cm4gZ2V0VXNlckluZm9BcGk7XHJcbiAgfSlcclxuICAuY2F0Y2goKGVycikgPT4gY29uc29sZS5sb2coZXJyKSk7XHJcblxyXG4vL9Ch0L7RhdGA0LDQvdC10L3QuNC1INC00LDQvdC90YvRhSDQtNC70Y8g0L/QvtC/LdCw0L/QsCDRhNC+0YDQvNGLINC/0YDQvtGE0LjQu9GMXHJcbnByb2ZpbGVPcGVuQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XHJcbiAgdmFsaWRpdHlGb3JtLmRpc2FibGVTdWJtaXRCdXR0b24oKTtcclxuICBjb25zdCBwcm9maWxlVXNlclBvcHVwID0gdXNlckluZm8uZ2V0VXNlckluZm8oKTtcclxuICBuYW1lSW5wdXQudmFsdWUgPSBwcm9maWxlVXNlclBvcHVwLnVzZXJuYW1lOyAvL9C30LDQv9C40YHRi9Cy0LDQtdC8INC00LDQvdC90YvQtSDQsiDQuNC90L/Rg9GCINC40Lcg0L/RgNC+0YTQsNC50LvQsFxyXG4gIGpvYklucHV0LnZhbHVlID0gcHJvZmlsZVVzZXJQb3B1cC5qb2I7XHJcbiAgcG9wdXBXaXRoUHJvZmlsZS5vcGVuKCk7XHJcbn0pO1xyXG5cclxuY29uc3QgcG9wdXBXaXRoUHJvZmlsZSA9IG5ldyBQb3B1cFdpdGhGb3JtKFwiLnBvcHVwLWZvcm1cIiwgaGFuZGxlRm9ybVN1Ym1pdFVzZXIpO1xyXG5cclxuZnVuY3Rpb24gaGFuZGxlRm9ybVN1Ym1pdFVzZXIoeyB1c2VybmFtZSwgam9iIH0pIHtcclxuICByZW5kZXJMb2FkaW5nKFwicG9wdXAtZm9ybVwiLCB0cnVlKTtcclxuICBhcGlcclxuICAgIC5hZGRVc2VySW5mbyh7IG5hbWU6IHVzZXJuYW1lLCBhYm91dDogam9iIH0pXHJcbiAgICAudGhlbigoZGF0YSkgPT4ge1xyXG4gICAgICB1c2VySW5mby5zZXRVc2VySW5mbyh7XHJcbiAgICAgICAgdXNlcm5hbWU6IGRhdGEubmFtZSxcclxuICAgICAgICBqb2I6IGRhdGEuYWJvdXQsXHJcbiAgICAgICAgYXZhdGFyOiBkYXRhLmF2YXRhcixcclxuICAgICAgfSk7XHJcbiAgICAgIHBvcHVwV2l0aFByb2ZpbGUuY2xvc2UoKTtcclxuICAgIH0pXHJcblxyXG4gICAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgY29uc29sZS5sb2coZXJyKTtcclxuICAgIH0pXHJcbiAgICAuZmluYWxseSgoKSA9PiB7XHJcbiAgICAgIHJlbmRlckxvYWRpbmcoXCJwb3B1cC1mb3JtXCIsIGZhbHNlKTtcclxuICAgIH0pO1xyXG59XHJcbi8vINC/0YDQvtC80LjRgSDQtNC70Y8g0L/QvtC70YPRh9C10L3QuNGPINC00LDQvdC90YvRhSDQutCw0YDRgtC40L3QutC4INC4INC/0L7Qu9GM0LfQvtCy0LDRgtC10LvRj1xyXG5Qcm9taXNlLmFsbChbaW5pdGlhbGNhcmRzLCBnZXRVc2VySW5mb0FwaV0pXHJcbiAgLnRoZW4oKFtjYXJkc0luaXQsIGdldFVzZXJJbmZvQXBpXSkgPT4ge1xyXG4gICAgdXNlckluZm8uc2V0VXNlcklkKGdldFVzZXJJbmZvQXBpLl9pZCk7XHJcbiAgICByZW5kZXJDYXJkLnJlbmRlckl0ZW1zKGNhcmRzSW5pdCk7XHJcbiAgICB1c2VySW5mby5zZXRVc2VySW5mbyh7XHJcbiAgICAgIHVzZXJuYW1lOiBnZXRVc2VySW5mb0FwaS5uYW1lLFxyXG4gICAgICBqb2I6IGdldFVzZXJJbmZvQXBpLmFib3V0LFxyXG4gICAgICBhdmF0YXI6IGdldFVzZXJJbmZvQXBpLmF2YXRhcixcclxuICAgIH0pO1xyXG5cclxuICAgIC8vY29uc29sZS5sb2coZ2V0VXNlckluZm9BcGkpXHJcbiAgfSlcclxuICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgY29uc29sZS5sb2coZXJyKTtcclxuICB9KTtcclxuXHJcbi8vINC/0L7Qv9C/0LDQvyDQuNC30LzQtdC90LXQvdC40Y8g0LDQstCw0YLQsNGA0LAuXHJcbmNvbnN0IHBvcHVwQXZhdGFyID0gbmV3IFBvcHVwV2l0aEZvcm0oXCIucG9wdXAtYXZhdGFyXCIsIGhhbmRsZUZvcm1TdWJtaXRBdmF0YXIpO1xyXG5cclxuYXZhdGFyQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XHJcbiAgdmFsaWRpdHlBdmF0YXIuZGlzYWJsZVN1Ym1pdEJ1dHRvbigpO1xyXG4gIHBvcHVwQXZhdGFyLm9wZW4oKTtcclxufSk7XHJcblxyXG5mdW5jdGlvbiBoYW5kbGVGb3JtU3VibWl0QXZhdGFyKHsgYXZhdGFyIH0pIHtcclxuICByZW5kZXJMb2FkaW5nKFwicG9wdXAtYXZhdGFyXCIsIHRydWUpO1xyXG4gIGFwaVxyXG4gICAgLmFkZFVzZXJBdmF0YXIoeyBhdmF0YXIgfSlcclxuICAgIC50aGVuKChkYXRhKSA9PiB7XHJcbiAgICAgIHVzZXJJbmZvLnNldFVzZXJJbmZvKHtcclxuICAgICAgICB1c2VybmFtZTogZGF0YS5uYW1lLFxyXG4gICAgICAgIGpvYjogZGF0YS5hYm91dCxcclxuICAgICAgICBhdmF0YXI6IGRhdGEuYXZhdGFyLFxyXG4gICAgICB9KTtcclxuICAgICAgcG9wdXBBdmF0YXIuY2xvc2UoKTtcclxuICAgIH0pXHJcbiAgICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICBjb25zb2xlLmxvZyhlcnIpO1xyXG4gICAgfSlcclxuICAgIC5maW5hbGx5KCgpID0+IHtcclxuICAgICAgcmVuZGVyTG9hZGluZyhcInBvcHVwLWF2YXRhclwiLCBmYWxzZSk7XHJcbiAgICB9KTtcclxufVxyXG5cclxuLy8g0YHQu9GD0YjQsNGC0LXQu9C4XHJcbnBvcHVwQ29uZmlybS5zZXRFdmVudExpc3RlbmVycygpO1xyXG5wb3B1cFdpdGhQcm9maWxlLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbnBvcHVwV2l0aENhcmQuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxucG9wdXBBdmF0YXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuIl0sIm5hbWVzIjpbIkNhcmQiLCJjYXJkU2VsZWN0b3IiLCJ1c2VySUQiLCJkYXRhIiwiaGFuZGxlQ2FyZENsaWNrIiwiaGFuZGxlQmluQ2xpY2siLCJoYW5kbGVMaWtlQ2xpY2siLCJ0aGlzIiwiX3RleHQiLCJuYW1lIiwiX2ltYWdlIiwibGluayIsIl9pZCIsImlkIiwiX2xpa2VzIiwibGlrZXMiLCJfb3duZXJJRCIsIm93bmVySUQiLCJfY2FyZFNlbGVjdG9yIiwiX2hhbmRsZUNhcmRDbGljayIsIl9oYW5kbGVCaW5DbGljayIsIl9oYW5kbGVMaWtlQ2xpY2siLCJfbGlrZXNVc2VyIiwic29tZSIsIml0ZW0iLCJfbGlrZUNvdW50ZXIiLCJsaWtlQ291bnRlciIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJfZWxlbWVudCIsIl9nZXRUZW1wbGF0ZSIsIl9waG90b0ltYWdlIiwic3JjIiwiYWx0IiwidGV4dENvbnRlbnQiLCJfYmluRWxlbWVudCIsImNsYXNzTGlzdCIsImFkZCIsIl9lbGVtZW50TGlrZUJ1dHRvbiIsIl9lbGVtZW50TGlrZUNvdW50ZXIiLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJsZW5ndGgiLCJpc0xpa2VkIiwicmVtb3ZlIiwiYWRkRXZlbnRMaXN0ZW5lciIsImV2dCIsIkZvcm1WYWxpZGF0b3IiLCJmb3JtTGlzdCIsIl9mb3JtU2VsZWN0b3IiLCJmb3JtU2VsZWN0b3IiLCJfaW5wdXRTZWxlY3RvciIsImlucHV0U2VsZWN0b3IiLCJfc3VibWl0QnV0dG9uU2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsIl9pbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsIl9pbnB1dEVycm9yQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJfZXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJfZm9ybUxpc3QiLCJfYnV0dG9uRWxlbWVudCIsImlucHV0RWxlbWVudCIsImVycm9yRWxlbWVudCIsInZhbGlkYXRpb25NZXNzYWdlIiwiX2lucHV0TGlzdCIsInZhbGlkaXR5IiwidmFsaWQiLCJkaXNhYmxlZCIsIl9oYXNJbnZhbGlkSW5wdXQiLCJkaXNhYmxlU3VibWl0QnV0dG9uIiwiX2VuYWJsZVN1Ym1pdEJ1dHRvbiIsIl9oaWRlSW5wdXRFcnJvciIsIl9zaG93SW5wdXRFcnJvciIsIkFycmF5IiwiZnJvbSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJfdG9nZ2xlQnV0dG9uU3RhdGUiLCJmb3JFYWNoIiwiX2NoZWNrSW5wdXRWYWxpZGl0eSIsIlNlY3Rpb24iLCJyZW5kZXJlciIsImNvbnRhaW5lclNlbGVjdG9yIiwiX3JlbmRlcmVyIiwiX2NvbnRhaW5lciIsImNhcmRFbGVtZW50IiwicHJlcGVuZCIsIml0ZW1zIiwiUG9wdXAiLCJwb3B1cFNlbGVjdG9yIiwia2V5IiwiY2xvc2UiLCJfcG9wdXAiLCJfaGFuZGxlRXNjQ2xvc2UiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiZXZlbnQiLCJ0YXJnZXQiLCJjb250YWlucyIsIlBvcHVwV2l0aEltYWdlIiwiaW1hZ2VQaG90byIsImltYWdlVGV4dCIsIl9pbWFnZVBob3RvIiwiX2ltYWdlVGV4dCIsImNhcmRuYW1lIiwiUG9wdXBXaXRoRm9ybSIsImhhbmRsZUZvcm1TdWJtaXQiLCJfcG9wdXBGb3JtQ2FyZCIsIl9oYW5kbGVGb3JtU3VibWl0IiwiaW5wdXRWYWx1ZXMiLCJpbnB1dCIsInZhbHVlIiwicHJldmVudERlZmF1bHQiLCJfZ2V0SW5wdXRWYWx1ZXMiLCJyZXNldCIsIlVzZXJJbmZvIiwidXNlcm5hbWUiLCJqb2IiLCJhdmF0YXIiLCJfdXNlcm5hbWUiLCJfam9iIiwiX2F2YXRhciIsIl91c2VySUQiLCJBcGkiLCJjb25maWciLCJfYmFzZVVybCIsImJhc2VVcmwiLCJfaGVhZGVycyIsImhlYWRlcnMiLCJyZXMiLCJvayIsImpzb24iLCJQcm9taXNlIiwicmVqZWN0Iiwic3RhdHVzIiwiZmV0Y2giLCJtZXRob2QiLCJ0aGVuIiwiX2hhbmRsZVByb21pc2VFcnIiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsIlBvcHVwV2l0aFN1Ym1pdCIsIl9mb3JtQ29uZmlybSIsIm15Q2FyZCIsInByb2ZpbGVPcGVuQnV0dG9uIiwicHJvZmlsZUZvcm0iLCJuYW1lSW5wdXQiLCJqb2JJbnB1dCIsImNhcmRzUG9wdXAiLCJjYXJkT3BlbkJ1dHRvbiIsImZvcm1DYXJkIiwiYXZhdGFyQnV0dG9uIiwiYXZhdGFyUG9wdXAiLCJvYmoiLCJhcGkiLCJhdXRob3JpemF0aW9uIiwicmVuZGVyTG9hZGluZyIsInBvcHVwIiwiaXNMb2FkaW5nIiwiY3VycmVudEFjdGl2ZUJ1dHRvbiIsInZhbGlkaXR5Rm9ybSIsInZhbGlkaXR5Q2FyZCIsInZhbGlkaXR5QXZhdGFyIiwiZW5hYmxlVmFsaWRhdGlvbiIsInBvcHVwV2l0aE9wZW5JbWFnZSIsIm9wZW4iLCJzZXRFdmVudExpc3RlbmVycyIsInBvcHVwQ29uZmlybSIsImNyZWF0ZUNhcmQiLCJjYXJkIiwiY29uZmlybURlbGV0ZU15Q2FyZCIsImRlbGV0ZU5ld0NhcmQiLCJnZXRJZCIsImhhbmRsZURlbGV0ZUJpbkNsaWNrIiwiY2F0Y2giLCJlcnIiLCJjb25zb2xlIiwibG9nIiwiZGVsZXRlTGlrZSIsInRvZ2dsZUxpa2VzU3RhdGUiLCJwdXRMaWtlQ2FyZCIsInVzZXJJbmZvIiwiZ2V0VXNlcklkIiwiZ2VuZXJhdGVDYXJkIiwicmVuZGVyQ2FyZCIsImFkZEl0ZW0iLCJpbml0aWFsY2FyZHMiLCJnZXRJbml0aWFsQ2FyZHMiLCJyZXN1bHQiLCJtYXAiLCJvd25lciIsInBvcHVwV2l0aENhcmQiLCJhZGROZXdDYXJkIiwiZmluYWxseSIsImdldFVzZXJJbmZvQXBpIiwiZ2V0VXNlckluZm9Gcm9tQXBpIiwicHJvZmlsZVVzZXJQb3B1cCIsImdldFVzZXJJbmZvIiwicG9wdXBXaXRoUHJvZmlsZSIsImFkZFVzZXJJbmZvIiwiYWJvdXQiLCJzZXRVc2VySW5mbyIsImFsbCIsImNhcmRzSW5pdCIsInNldFVzZXJJZCIsInJlbmRlckl0ZW1zIiwicG9wdXBBdmF0YXIiLCJhZGRVc2VyQXZhdGFyIl0sInNvdXJjZVJvb3QiOiIifQ==